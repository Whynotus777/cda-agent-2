{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Analysis Report",
  "description": "Report from lint, CDC, or other analysis tools",
  "type": "object",
  "required": ["report_id", "tool", "analysis_type"],
  "properties": {
    "report_id": {
      "type": "string",
      "description": "Unique identifier for this report"
    },
    "tool": {
      "type": "string",
      "enum": ["verilator", "yosys", "spyglass", "jaspergold", "custom"],
      "description": "Tool that generated the report"
    },
    "analysis_type": {
      "type": "string",
      "enum": ["lint", "cdc", "syntax", "semantic", "timing", "power"],
      "description": "Type of analysis performed"
    },
    "log_content": {
      "type": "string",
      "description": "Raw log output from tool"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "issues": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["severity", "message"],
        "properties": {
          "id": {"type": "string"},
          "severity": {
            "type": "string",
            "enum": ["error", "warning", "info", "note"]
          },
          "category": {
            "type": "string",
            "enum": ["syntax", "semantic", "cdc", "lint", "style", "timing", "other"]
          },
          "message": {"type": "string"},
          "file": {"type": "string"},
          "line": {"type": "integer"},
          "column": {"type": "integer"},
          "code_snippet": {"type": "string"},
          "rule_violated": {"type": "string"},
          "suggestion": {"type": "string"}
        }
      }
    },
    "summary": {
      "type": "object",
      "properties": {
        "total_issues": {"type": "integer"},
        "errors": {"type": "integer"},
        "warnings": {"type": "integer"},
        "info": {"type": "integer"},
        "files_analyzed": {"type": "integer"}
      }
    }
  }
}
